{
  "_comments": {
    "description": "Minimal Field Mappings Configuration for incident.io ↔ ServiceNow Synchronization",
    "purpose": "This configuration contains only the essential field mappings needed for basic bidirectional sync",
    "customization": "Add additional field mappings as needed for your specific environment",
    "sections": {
      "incident_creation": "Core fields needed when creating ServiceNow incidents from incident.io",
      "incident_updates": "Core fields synced when incident.io incidents are updated", 
      "reverse_mappings": "CRITICAL - Maps ServiceNow changes back to incident.io",
      "validation_rules": "Basic validation requirements"
    },
    "important_notes": [
      "REQUIRED: Update severity UUIDs to match your incident.io organization",
      "REQUIRED: Ensure u_incident_io_id custom field exists in ServiceNow",
      "Optional: Add user/service mappings if your environment supports them"
    ]
  },
  
  "incident_creation": {
    "short_description": {
      "source": "incident.name",
      "type": "text",
      "required": true,
      "description": "Maps incident.io incident name to ServiceNow short description"
    },
    "description": {
      "source": "incident.summary",
      "type": "text",
      "fallback": "No summary provided",
      "description": "Maps incident.io summary to ServiceNow description"
    },
    "urgency": {
      "source": "incident.severity.name",
      "type": "choice_mapping",
      "mappings": {
        "Critical": "1",
        "Major": "2", 
        "Minor": "3",
        "Low": "3"
      },
      "fallback": "3",
      "description": "Map incident.io severity to ServiceNow urgency"
    },
    "impact": {
      "source": "incident.severity.name",
      "type": "choice_mapping",
      "mappings": {
        "Critical": "1",
        "Major": "2",
        "Minor": "3", 
        "Low": "3"
      },
      "fallback": "3",
      "description": "Map incident.io severity to ServiceNow impact"
    },
    "u_incident_io_id": {
      "source": "incident.id",
      "type": "text",
      "required": true,
      "description": "CRITICAL: Store incident.io ID for bidirectional sync tracking"
    },
    "u_incident_io_url": {
      "source": "incident.permalink",
      "type": "text",
      "description": "Store incident.io permalink for easy user navigation"
    }
  },
  
  "incident_updates": {
    "short_description": {
      "source": "incident.name",
      "type": "text",
      "description": "Update ServiceNow short description from incident.io name"
    },
    "description": {
      "source": "incident.summary", 
      "type": "text",
      "description": "Update ServiceNow description from incident.io summary"
    },
    "work_notes": {
      "source": "incident.most_recent_update_message", 
      "type": "text",
      "deduplicate": true,
      "dedupe_field": "work_notes",
      "description": "Add incident.io updates as work notes with deduplication"
    },
    "incident_state": {
      "source": "incident.incident_status.name",
      "type": "choice_mapping",
      "mappings": {
        "Triage": "1",
        "Investigating": "2",
        "Fixing": "2",
        "Monitoring": "3",
        "Paused": "3",
        "Documenting": "6", 
        "Reviewing": "6",
        "Closed": "7",
        "Canceled": "8",
        "Declined": "8",
        "Merged": "7"
      },
      "fallback": "2",
      "description": "Map incident.io status to ServiceNow incident_state"
    },
    "urgency": {
      "source": "incident.severity.name",
      "type": "choice_mapping",
      "mappings": {
        "Critical": "1",
        "Major": "2",
        "Minor": "3"
      },
      "fallback": "3",
      "description": "Map incident.io severity to ServiceNow urgency"
    },
    "impact": {
      "source": "incident.severity.name",
      "type": "choice_mapping",
      "mappings": {
        "Critical": "1",
        "Major": "2", 
        "Minor": "3"
      },
      "fallback": "3",
      "description": "Map incident.io severity to ServiceNow impact"
    }
  },
  
  "reverse_mappings": {
    "_comments": {
      "description": "CRITICAL - Maps ServiceNow values to incident.io for reverse synchronization",
      "status_mapping": "Maps ServiceNow incident_state values to incident.io status IDs",
      "severity_mapping": "Maps ServiceNow priority values (1-5) to incident.io severity UUIDs",
      "important": "REPLACE THE UUIDs BELOW WITH YOUR ORGANIZATION'S ACTUAL incident.io SEVERITY UUIDs"
    },
    "status": {
      "_comment": "Maps ServiceNow incident_state to incident.io status IDs (WORKFLOW COMPLIANT ONLY)",
      "1": "01JT3NNT3D4J0DDWS19MQYF0RC",  
      "2": "01JT3NNT3D4J0DDWS19MQYF0RC", 
      "3": "01JT3NNT3D455EB53SWJHK1QST",  
      "6": "01JT3NNT3D73EK2RXFW4GJY310",  
      "7": "01JT3NNT3D73EK2RXFW4GJY310",  
      "8": "01JT3NNT3D73EK2RXFW4GJY310"   
    },
    "severity": {
      "_comments": {
        "priority_1": "Critical priority → Critical severity UUID",
        "priority_2": "High priority → Major severity UUID", 
        "priority_3_5": "Medium/Low/Planning priority → Minor severity UUID",
        "how_to_find_uuids": "Get these from: curl -H 'Authorization: Bearer YOUR_API_KEY' https://api.incident.io/v1/severities"
      },
      "1": "01JT3NNT3DH019S8XA0D9YGJEF",
      "2": "01JT3NNT3DTF8D9ZS7QZPFM9QM", 
      "3": "01JT3NNT3DW44F1KGJ68WDV9R6",
      "4": "01JT3NNT3DW44F1KGJ68WDV9R6",
      "5": "01JT3NNT3DW44F1KGJ68WDV9R6"
    }
  },
  
  "validation_rules": {
    "required_fields_creation": ["short_description", "u_incident_io_id"],
    "required_fields_update": ["u_incident_io_id"],
    "max_field_lengths": {
      "short_description": 160,
      "work_notes": 4000
    }
  }
}